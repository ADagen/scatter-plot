## Scatter plot ![](https://github.com/adagen/scatter-plot/workflows/build_and_deploy_static/badge.svg)


Онлайн демо: https://adagen.github.io/scatter-plot/  


### Задача
Реализовать ĸомпоненту для отображения scatter plot (https://en.wikipedia.org/wiki/Scatter_plot) по входным данным, отрисовать на ней точĸи и линию тренда, полученного линейной аппроĸсимацией.

#### Входные данные
```typescript
type Point = {
   x: number;
   y: number;
}

type APIResponse = {
    points: Point[];
    title: string;
    xTitle?: string;
    yTitle?: string;
}
```

#### Требования
- React, Typescript, Storybook (опционально)
- Двухмерная диаграмма, отрисованная с помощью SVG
- Дизайн произвольный, пример уĸазан ниже.
- Необходимо наличие осей ĸоординат
- Линейная шĸала значений на осях, вычисляемая из точеĸ эĸстремума
- Опциональная легенда для ĸаждой из осей, строĸа
- Линия тренда, полученная аппроĸсимацией линейной фунĸцией
- Нельзя использовать библиотеĸи для работы с графиĸой.

#### Реализация
Для сборки/компиляции использован `webpack` с `babel` и плагином для тайпскрипта, стандартный tsc использовался только для проверки ошибок (с опцией noEmit). Для управлением сайдэффектами использована `redux-saga`.
```bash
yarn start
```
Запускает webpack-dev-server для локальной разработки. Обычно во второй вкладке терминала запускаю `yarn tsc -w` для отчётов об ошибках.
```bash
yarn build
```
Собирает статику в `dist` для проверки, можно использовать локально для проверки, а также используется в workflow Github Actions: при пуше в master основного репозитория происходит автоматическая сборка и деплой в `gh-pages`.
#### Интерфейс
Три кнопки над диаграммой вызывают сценарии загрузки готовых датасетов (датасеты добавлены в репозиторий, но по кнопке загружаются http-запросом). Правее трёх кнопок - текстовое поле для ввода произвольного урла, на который можно отправить запрос на получение данных для отрисовки на диаграмме. Запрос отправляется без CORS, поэтому с pastebin, например, не получится загрузить. Зато получится с гитхаба.

Под диаграммой - текстовые данные приложения: экстремумы, уравнение функции тренда, набор точек из датасета.
#### Отрисовка диаграммы
Для управлением отрисовки и преобразования мировых координат в экранные используется стек трансформаций (SVG атрибуты вместо CSS-трансформаций, так как Edge только с 17-й версии поддерживает CSS-трансформации для SVG). Компонент `CongruentTransform` с помощью селекторов получает состояние приложения и применяет ко всем своим потомкам нужные преобразования. Далее точки и линия тренда могут рисоваться с мировыми координатами. Цифры на основных осях диаграммы и их масштаб выбираются исходя из экстремумов, чтобы все точки датасета попали на вьюпорт диаграммы. Базисы (ось абсцисс и ось ординат) рисуются только если попадают во вьюпорт.
  
<продолжение следует>
